{"version":3,"file":"633.c3765aa0c249cf70.js","mappings":"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","names":["PerfilPermissaoService","constructor","http","this","getAll","get","env","apiPath","getById","perfilPermissao","perfilId","permissaoId","insert","post","update","put","delete","i0","factory","PerfilPermissaoListComponent","perfilService","permissaoService","perfilPermissaoService","filtro","pagina","direcaoOrdenacao","tamanho","ordenarPor","ngOnInit","carregaInformacoesPerfilPermissao","subscribe","perfils","content","error","toastr","timeOut","progressBar","closeButton","permissoes","carregaDadosPerfilPermissao","atualizaPerfilPermissao","perfil","permissao","perfilPermissaoRequest","find","pp","id","status","index","findIndex","mostrarPermissao","permissaoAtivada","length","perfilPermissoes","selectors","PerfilPermissaoVinculacaoComponent","temPermissao","adicionarPermissao","descricao","nome","push","removerPermissao","splice","routes","path","component","ConfiguracoesComponent","_changeDetectorRef","_fuseMediaWatcherService","Subject","panels","icon","title","description","onMediaChange$","pipe","takeUntil","_unsubscribeAll","matchingAliases","includes","drawerMode","drawerOpened","markForCheck","ngOnDestroy","next","complete","goToPanel","panel","selectedPanel","drawer","close","getPanelInfo","trackByFn","item","PerfilPermissaoModule","CommonModule","RouterModule","SharedModule"],"sourceRoot":"webpack:///","sources":["./src/app/modules/perfil-permissao/api/perfil-permissao.service.ts","./src/app/modules/perfil-permissao/containers/perfil-permissao-list/perfil-permissao-list.component.html","./src/app/modules/perfil-permissao/containers/perfil-permissao-list/perfil-permissao-list.component.ts","./src/app/modules/perfil-permissao/containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component.html","./src/app/modules/perfil-permissao/containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component.ts","./src/app/modules/perfil-permissao/containers/configuracoes/configuracoes.component.html","./src/app/modules/perfil-permissao/perfil-permissao.module.ts","./src/app/modules/perfil-permissao/containers/configuracoes/configuracoes.component.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\r\nimport { Injectable } from '@angular/core';\r\nimport { Observable } from 'rxjs';\r\nimport { PerfilPermissao } from '../model/perfil-permissao.model';\r\nimport { environment as env } from 'environments/environment';\r\n\r\n@Injectable({\r\n  providedIn: 'root',\r\n})\r\nexport class PerfilPermissaoService {\r\n  readonly apiPath = '/perfilpermissao';\r\n\r\n  constructor(private http: HttpClient) {}\r\n\r\n  getAll(): Observable<PerfilPermissao[]> {\r\n    return this.http.get<PerfilPermissao[]>(`${env.api}${this.apiPath}`);\r\n  }\r\n\r\n  getById(perfilPermissao: PerfilPermissao): Observable<PerfilPermissao> {\r\n    return this.http.get<PerfilPermissao>(\r\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`\r\n    );\r\n  }\r\n\r\n  insert(perfilPermissao: PerfilPermissao): Observable<null> {\r\n    return this.http.post<null>(`${env.api}${this.apiPath}`, perfilPermissao);\r\n  }\r\n\r\n  update(perfilPermissao: PerfilPermissao): Observable<null> {\r\n    return this.http.put<null>(\r\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`,\r\n      perfilPermissao\r\n    );\r\n  }\r\n\r\n  delete(perfilPermissao: PerfilPermissao): Observable<null> {\r\n    return this.http.delete<null>(\r\n      `${env.api}${this.apiPath}/${perfilPermissao.perfilId}/${perfilPermissao.permissaoId}`\r\n    );\r\n  }\r\n}\r\n","<div class=\"w-full max-w-3xl\">\r\n  <ng-container *ngFor=\"let perfil of perfils\">\r\n    <mat-accordion class=\"max-w-4xl mt-8\">\r\n      <mat-expansion-panel class=\"bg-accent-200 dark:bg-accent-700 mt-2\">\r\n        <mat-expansion-panel-header [collapsedHeight]=\"'56px'\">\r\n          <mat-panel-title class=\"font-medium leading-tight\">\r\n            {{ perfil.nome }}\r\n          </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <div class=\"grid grid-cols-1 gap-2 w-full mt-3\">\r\n          <!-- Permissão pai -->\r\n          <ng-container *ngFor=\"let permissao of permissoes\">\r\n            <ng-container\r\n              *ngIf=\"\r\n                !permissao.permissaoPai && mostrarPermissao(perfil, permissao)\r\n              \"\r\n            >\r\n              <div\r\n                class=\"flex items-center justify-between mt-3 border-dashed border-primary hover:border-b-2\"\r\n              >\r\n                <div\r\n                  class=\"flex-auto cursor-pointer\"\r\n                  (click)=\"communication.toggle()\"\r\n                >\r\n                  <div class=\"leading-6 font-medium\">\r\n                    {{ permissao.descricao }}\r\n                  </div>\r\n                </div>\r\n                <mat-slide-toggle\r\n                  (click)=\"atualizaPerfilPermissao(perfil, permissao)\"\r\n                  [checked]=\"permissaoAtivada(perfil, permissao)\"\r\n                  class=\"ml-2\"\r\n                  [color]=\"'primary'\"\r\n                  #communication\r\n                >\r\n                </mat-slide-toggle>\r\n              </div>\r\n\r\n              <ng-container *ngFor=\"let permissao_filho of permissoes\">\r\n                <!-- Permissão Filha -->\r\n                <div\r\n                  class=\"flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2\"\r\n                  *ngIf=\"\r\n                    permissao_filho.permissaoPai &&\r\n                    permissao_filho.permissaoPai.descricao ===\r\n                      permissao.descricao\r\n                  \"\r\n                >\r\n                  <div\r\n                    class=\"flex-auto cursor-pointer\"\r\n                    (click)=\"securityToggle.toggle()\"\r\n                  >\r\n                    <div class=\"leading-6 font-medium\">\r\n                      {{ permissao_filho.descricao }}\r\n                    </div>\r\n                  </div>\r\n                  <mat-slide-toggle\r\n                    (click)=\"atualizaPerfilPermissao(perfil, permissao_filho)\"\r\n                    [checked]=\"permissaoAtivada(perfil, permissao_filho)\"\r\n                    class=\"ml-2\"\r\n                    [color]=\"'primary'\"\r\n                    #securityToggle\r\n                  >\r\n                  </mat-slide-toggle>\r\n                </div>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n  </ng-container>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PerfilService } from 'app/modules/perfil/api/perfil.service';\r\nimport { Perfil } from 'app/modules/perfil/models/perfil.model';\r\nimport { PermissaoService } from 'app/modules/permissao/api/permissao.service';\r\nimport { Permissao } from 'app/modules/permissao/permissao.mode';\r\nimport { IFilter } from 'app/shared/models/interface.model';\r\nimport { PerfilPermissaoService } from '../../api/perfil-permissao.service';\r\nimport { PerfilPermissao } from '../../model/perfil-permissao.model';\r\nimport toastr from 'toastr';\r\n\r\n@Component({\r\n  selector: 'app-perfil-permissao-list',\r\n  templateUrl: './perfil-permissao-list.component.html',\r\n  styleUrls: ['./perfil-permissao-list.component.scss'],\r\n})\r\nexport class PerfilPermissaoListComponent implements OnInit {\r\n  constructor(\r\n    private perfilService: PerfilService,\r\n    private permissaoService: PermissaoService,\r\n    private perfilPermissaoService: PerfilPermissaoService\r\n  ) {}\r\n\r\n  perfils: Perfil[] = [];\r\n  permissoes: Permissao[] = [];\r\n  perfilPermissao: PerfilPermissao[] = [];\r\n\r\n  filtro: IFilter = {\r\n    filtro: '',\r\n    pagina: 0,\r\n    direcaoOrdenacao: 'ASC',\r\n    tamanho: 100,\r\n    ordenarPor: 'id',\r\n  };\r\n\r\n  ngOnInit(): void {\r\n    this.carregaInformacoesPerfilPermissao();\r\n  }\r\n\r\n  carregaInformacoesPerfilPermissao(): void {\r\n    this.perfilService.getAll(this.filtro).subscribe(\r\n      (perfils) => {\r\n        this.perfils = perfils.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os perfils',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.permissaoService.getAll(this.filtro).subscribe(\r\n      (permissoes) => {\r\n        this.permissoes = permissoes.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.carregaDadosPerfilPermissao();\r\n  }\r\n\r\n  atualizaPerfilPermissao(perfil: Perfil, permissao: Permissao): void {\r\n    let perfilPermissaoRequest: PerfilPermissao = {\r\n      ...this.perfilPermissao.find(\r\n        (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n      ),\r\n    };\r\n    perfilPermissaoRequest.status = !perfilPermissaoRequest.status;\r\n    this.perfilPermissaoService.update(perfilPermissaoRequest).subscribe(\r\n      () => {\r\n        const index = this.perfilPermissao.findIndex(\r\n          (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n        );\r\n        this.perfilPermissao[index].status = perfilPermissaoRequest.status;\r\n        toastr.success('Permissao atualizada com sucesso!', '', {\r\n          timeOut: 10000,\r\n          progressBar: true,\r\n          closeButton: true,\r\n        });\r\n      },\r\n      (error) => {\r\n        toastr.error(\r\n          'Não foi possível atualizar perfil e permissao selecionado',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        );\r\n      }\r\n    );\r\n  }\r\n\r\n  mostrarPermissao(perfil: Perfil, permissao: Permissao): boolean {\r\n    return !!this.perfilPermissao.find(\r\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n    );\r\n  }\r\n\r\n  permissaoAtivada(perfil: Perfil, permissao: Permissao): boolean {\r\n    if (this.perfilPermissao.length < 1) return false;\r\n    const perfilPermissao = this.perfilPermissao.find(\r\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n    );\r\n\r\n    if (!perfilPermissao) return false;\r\n\r\n    return perfilPermissao.status;\r\n  }\r\n\r\n  private carregaDadosPerfilPermissao(): void {\r\n    this.perfilPermissaoService.getAll().subscribe(\r\n      (perfilPermissoes) => {\r\n        this.perfilPermissao = perfilPermissoes;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar perfils e permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n  }\r\n}\r\n","<div class=\"w-full max-w-3xl\">\r\n  <ng-container *ngFor=\"let perfil of perfils\">\r\n    <mat-accordion class=\"max-w-4xl mt-8 bg-accent-400\">\r\n      <mat-expansion-panel class=\"bg-accent-200 dark:bg-accent-700 mt-2\">\r\n        <mat-expansion-panel-header [collapsedHeight]=\"'56px'\">\r\n          <mat-panel-title class=\"font-medium leading-tight\">\r\n            {{ perfil.nome }}\r\n          </mat-panel-title>\r\n        </mat-expansion-panel-header>\r\n        <div class=\"grid grid-cols-1 gap-2 w-full mt-3\">\r\n          <!-- Permissão pai -->\r\n          <ng-container *ngFor=\"let permissao of permissoes\">\r\n            <ng-container *ngIf=\"!permissao.permissaoPai\">\r\n              <div\r\n                class=\"flex items-center justify-between mt-3 border-dashed border-primary hover:border-b-2\"\r\n              >\r\n                <div class=\"flex-auto\">\r\n                  <div class=\"leading-6 font-medium\">\r\n                    {{ permissao.descricao }}\r\n                  </div>\r\n                </div>\r\n                <div class=\"order-1 sm:order-2 sm:ml-3 cursor-pointer\">\r\n                  <button\r\n                    *ngIf=\"!temPermissao(perfil, permissao)\"\r\n                    mat-icon-button\r\n                    class=\"hover:bg-green-100 hover:dark:bg-green\"\r\n                    (click)=\"adicionarPermissao(perfil, permissao)\"\r\n                  >\r\n                    <mat-icon\r\n                      class=\"text-hint text-green-700 dark:text-on-green\"\r\n                      [svgIcon]=\"'heroicons_outline:plus-circle'\"\r\n                    ></mat-icon>\r\n                  </button>\r\n                  <button\r\n                    *ngIf=\"temPermissao(perfil, permissao)\"\r\n                    mat-icon-button\r\n                    class=\"hover:bg-red-100 hover:dark:bg-red\"\r\n                    (click)=\"removerPermissao(perfil, permissao)\"\r\n                  >\r\n                    <mat-icon\r\n                      class=\"text-hint text-red-700 dark:text-on-red\"\r\n                      [svgIcon]=\"'heroicons_outline:trash'\"\r\n                    ></mat-icon>\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <ng-container *ngFor=\"let permissao_filho of permissoes\">\r\n                <!-- Permissão Filha -->\r\n                <div\r\n                  class=\"flex items-center justify-between ml-6 border-dashed border-primary hover:border-b-2\"\r\n                  *ngIf=\"\r\n                    permissao_filho.permissaoPai &&\r\n                    permissao_filho.permissaoPai.descricao ===\r\n                      permissao.descricao\r\n                  \"\r\n                >\r\n                  <div class=\"flex-auto\">\r\n                    <div class=\"leading-6 font-medium\">\r\n                      {{ permissao_filho.descricao }}\r\n                    </div>\r\n                  </div>\r\n                  <div class=\"order-1 sm:order-2 sm:ml-3 cursor-pointer\">\r\n                    <button\r\n                      *ngIf=\"!temPermissao(perfil, permissao_filho)\"\r\n                      mat-icon-button\r\n                      class=\"hover:bg-green-100 hover:dark:bg-green\"\r\n                      (click)=\"adicionarPermissao(perfil, permissao_filho)\"\r\n                    >\r\n                      <mat-icon\r\n                        class=\"text-hint text-green-700 dark:text-on-green\"\r\n                        [svgIcon]=\"'heroicons_outline:plus-circle'\"\r\n                      ></mat-icon>\r\n                    </button>\r\n                    <button\r\n                      *ngIf=\"temPermissao(perfil, permissao_filho)\"\r\n                      mat-icon-button\r\n                      class=\"hover:bg-red-100 hover:dark:bg-red\"\r\n                      (click)=\"removerPermissao(perfil, permissao_filho)\"\r\n                    >\r\n                      <mat-icon\r\n                        class=\"text-hint text-red-700 dark:text-on-red\"\r\n                        [svgIcon]=\"'heroicons_outline:trash'\"\r\n                      ></mat-icon>\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              </ng-container>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </mat-expansion-panel>\r\n    </mat-accordion>\r\n  </ng-container>\r\n</div>\r\n","import { Component, OnInit } from '@angular/core';\r\nimport { PerfilService } from 'app/modules/perfil/api/perfil.service';\r\nimport { Perfil } from 'app/modules/perfil/models/perfil.model';\r\nimport { PermissaoService } from 'app/modules/permissao/api/permissao.service';\r\nimport { Permissao } from 'app/modules/permissao/permissao.mode';\r\nimport { IFilter } from 'app/shared/models/interface.model';\r\nimport { PerfilPermissaoService } from '../../api/perfil-permissao.service';\r\nimport { PerfilPermissao } from '../../model/perfil-permissao.model';\r\nimport toastr from 'toastr';\r\n\r\n@Component({\r\n  selector: 'app-perfil-permissao-vinculacao',\r\n  templateUrl: './perfil-permissao-vinculacao.component.html',\r\n  styleUrls: ['./perfil-permissao-vinculacao.component.scss'],\r\n})\r\nexport class PerfilPermissaoVinculacaoComponent implements OnInit {\r\n  perfils: Perfil[] = [];\r\n  permissoes: Permissao[] = [];\r\n  perfilPermissao: PerfilPermissao[] = [];\r\n\r\n  filtro: IFilter = {\r\n    filtro: '',\r\n    pagina: 0,\r\n    direcaoOrdenacao: 'ASC',\r\n    tamanho: 100,\r\n    ordenarPor: 'id',\r\n  };\r\n\r\n  constructor(\r\n    private perfilService: PerfilService,\r\n    private permissaoService: PermissaoService,\r\n    private perfilPermissaoService: PerfilPermissaoService\r\n  ) {}\r\n\r\n  ngOnInit(): void {\r\n    this.carregaInformacoesPerfilPermissao();\r\n  }\r\n\r\n  carregaInformacoesPerfilPermissao(): void {\r\n    this.perfilService.getAll(this.filtro).subscribe(\r\n      (perfils) => {\r\n        this.perfils = perfils.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os perfils',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.permissaoService.getAll(this.filtro).subscribe(\r\n      (permissoes) => {\r\n        this.permissoes = permissoes.content;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar os permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n\r\n    this.perfilPermissaoService.getAll().subscribe(\r\n      (perfilPermissoes) => {\r\n        this.perfilPermissao = perfilPermissoes;\r\n      },\r\n      (error) =>\r\n        toastr.error(\r\n          'Não foi possível carregar perfils e permissões',\r\n          error.error.error,\r\n          {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          }\r\n        )\r\n    );\r\n  }\r\n\r\n  temPermissao(perfil: Perfil, permissao: Permissao): boolean {\r\n    return !!this.perfilPermissao.find(\r\n      (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n    );\r\n  }\r\n\r\n  adicionarPermissao(perfil: Perfil, permissao: Permissao): void {\r\n    this.perfilPermissaoService\r\n      .insert({\r\n        perfilId: perfil.id,\r\n        permissaoId: permissao.id,\r\n        status: true,\r\n      })\r\n      .subscribe(\r\n        () => {\r\n          toastr.success(\r\n            `Permissão ${permissao.descricao} vínculada ao perfil ${perfil.nome} com sucesso!`,\r\n            '',\r\n            {\r\n              timeOut: 10000,\r\n              progressBar: true,\r\n              closeButton: true,\r\n            }\r\n          );\r\n          this.perfilPermissao.push({\r\n            perfilId: perfil.id,\r\n            permissaoId: permissao.id,\r\n            status: true,\r\n          });\r\n        },\r\n        (error) =>\r\n          toastr.error('Erro ao víncular nova permissão', error.error.error, {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          })\r\n      );\r\n  }\r\n\r\n  removerPermissao(perfil: Perfil, permissao: Permissao): void {\r\n    this.perfilPermissaoService\r\n      .delete({\r\n        perfilId: perfil.id,\r\n        permissaoId: permissao.id,\r\n        status: true,\r\n      })\r\n      .subscribe(\r\n        () => {\r\n          toastr.success(\r\n            `Permissão ${permissao.descricao} removida do perfil ${perfil.nome} com sucesso!`,\r\n            '',\r\n            {\r\n              timeOut: 10000,\r\n              progressBar: true,\r\n              closeButton: true,\r\n            }\r\n          );\r\n          const index = this.perfilPermissao.findIndex(\r\n            (pp) => pp.perfilId === perfil.id && pp.permissaoId === permissao.id\r\n          );\r\n          this.perfilPermissao.splice(index, 1);\r\n        },\r\n        (error) =>\r\n          toastr.error('Não foi possível remover vínculo', error.error.error, {\r\n            timeOut: 10000,\r\n            progressBar: true,\r\n            closeButton: true,\r\n          })\r\n      );\r\n  }\r\n}\r\n","<div\r\n  class=\"flex flex-col w-full min-w-0 sm:absolute sm:inset-0 sm:overflow-hidden\"\r\n>\r\n  <mat-drawer-container class=\"flex-auto sm:h-full dark:bg-accent-800\">\r\n    <!-- Drawer -->\r\n    <mat-drawer\r\n      class=\"sm:w-96 dark:bg-gray-900\"\r\n      [autoFocus]=\"false\"\r\n      [mode]=\"drawerMode\"\r\n      [opened]=\"drawerOpened\"\r\n      #drawer\r\n    >\r\n      <!-- Header -->\r\n      <div class=\"flex items-center justify-between m-8 mr-6 sm:my-10\">\r\n        <!-- Title -->\r\n        <div class=\"text-4xl font-extrabold tracking-tight leading-none\">\r\n          Configurações\r\n        </div>\r\n        <!-- Close button -->\r\n        <div class=\"lg:hidden\">\r\n          <button mat-icon-button (click)=\"drawer.close()\">\r\n            <mat-icon [svgIcon]=\"'heroicons_outline:x'\"></mat-icon>\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <!-- Panel links -->\r\n      <div class=\"flex flex-col divide-y border-t border-b\">\r\n        <ng-container *ngFor=\"let panel of panels; trackBy: trackByFn\">\r\n          <div\r\n            class=\"flex px-8 py-5 cursor-pointer\"\r\n            [ngClass]=\"{\r\n              'hover:bg-gray-100 dark:hover:bg-hover':\r\n                !selectedPanel || selectedPanel !== panel.id,\r\n              'bg-primary-50 dark:bg-hover':\r\n                selectedPanel && selectedPanel === panel.id\r\n            }\"\r\n            (click)=\"goToPanel(panel.id)\"\r\n          >\r\n            <mat-icon\r\n              [ngClass]=\"{\r\n                'text-hint': !selectedPanel || selectedPanel !== panel.id,\r\n                'text-primary dark:text-primary-500':\r\n                  selectedPanel && selectedPanel === panel.id\r\n              }\"\r\n              [svgIcon]=\"panel.icon\"\r\n            ></mat-icon>\r\n            <div class=\"ml-3\">\r\n              <div\r\n                class=\"font-medium leading-6\"\r\n                [ngClass]=\"{\r\n                  'text-primary dark:text-primary-500':\r\n                    selectedPanel && selectedPanel === panel.id\r\n                }\"\r\n              >\r\n                {{panel.title}}\r\n              </div>\r\n              <div class=\"mt-0.5 text-secondary\">\r\n                {{panel.description}}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </ng-container>\r\n      </div>\r\n    </mat-drawer>\r\n\r\n    <!-- Drawer content -->\r\n    <mat-drawer-content class=\"flex flex-col\">\r\n      <!-- Main -->\r\n      <div class=\"flex-auto px-6 pt-9 pb-12 md:p-8 md:pb-12 lg:p-12\">\r\n        <!-- Panel header -->\r\n        <div class=\"flex items-center\">\r\n          <!-- Drawer toggle -->\r\n          <button\r\n            class=\"lg:hidden -ml-2\"\r\n            mat-icon-button\r\n            (click)=\"drawer.toggle()\"\r\n          >\r\n            <mat-icon [svgIcon]=\"'heroicons_outline:menu'\"></mat-icon>\r\n          </button>\r\n\r\n          <!-- Panel title -->\r\n          <div\r\n            class=\"ml-2 lg:ml-0 text-3xl font-bold tracking-tight leading-none\"\r\n          >\r\n            {{getPanelInfo(selectedPanel).title}}\r\n          </div>\r\n        </div>\r\n\r\n        <!-- Load settings panel -->\r\n        <div class=\"mt-8\">\r\n          <ng-container [ngSwitch]=\"selectedPanel\">\r\n            <!-- Account -->\r\n            <ng-container *ngSwitchCase=\"'perfils'\">\r\n              <app-perfil-permissao-list></app-perfil-permissao-list>\r\n            </ng-container>\r\n            <!-- Security -->\r\n            <ng-container *ngSwitchCase=\"'vinculacao'\">\r\n              <app-perfil-permissao-vinculacao></app-perfil-permissao-vinculacao>\r\n            </ng-container>\r\n          </ng-container>\r\n        </div>\r\n      </div>\r\n    </mat-drawer-content>\r\n  </mat-drawer-container>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { PerfilPermissaoListComponent } from './containers/perfil-permissao-list/perfil-permissao-list.component';\r\nimport { SharedModule } from 'app/shared/shared.module';\r\nimport { Route, RouterModule } from '@angular/router';\r\nimport { ConfiguracoesComponent } from './containers/configuracoes/configuracoes.component';\r\nimport { PerfilPermissaoVinculacaoComponent } from './containers/perfil-permissao-vinculacao/perfil-permissao-vinculacao.component';\r\n\r\nconst routes: Route[] = [{ path: '', component: ConfiguracoesComponent }];\r\n\r\n@NgModule({\r\n  declarations: [\r\n    PerfilPermissaoListComponent,\r\n    ConfiguracoesComponent,\r\n    PerfilPermissaoVinculacaoComponent,\r\n  ],\r\n  imports: [CommonModule, RouterModule.forChild(routes), SharedModule],\r\n})\r\nexport class PerfilPermissaoModule {}\r\n","import { ChangeDetectionStrategy, ChangeDetectorRef, Component, OnDestroy, OnInit, ViewChild, ViewEncapsulation } from '@angular/core';\r\nimport { MatDrawer } from '@angular/material/sidenav';\r\nimport { Subject, takeUntil } from 'rxjs';\r\nimport { FuseMediaWatcherService } from '@fuse/services/media-watcher';\r\n\r\n@Component({\r\n  selector: 'app-configuracoes',\r\n  templateUrl: './configuracoes.component.html',\r\n  styleUrls: ['./configuracoes.component.scss']\r\n})\r\nexport class ConfiguracoesComponent implements OnInit, OnDestroy\r\n{\r\n    @ViewChild('drawer') drawer: MatDrawer;\r\n    drawerMode: 'over' | 'side' = 'side';\r\n    drawerOpened: boolean = true;\r\n    panels: any[] = [];\r\n    selectedPanel: string = 'perfils';\r\n    private _unsubscribeAll: Subject<any> = new Subject<any>();\r\n\r\n    /**\r\n     * Constructor\r\n     */\r\n    constructor(\r\n        private _changeDetectorRef: ChangeDetectorRef,\r\n        private _fuseMediaWatcherService: FuseMediaWatcherService\r\n    )\r\n    {\r\n    }\r\n\r\n    // -----------------------------------------------------------------------------------------------------\r\n    // @ Lifecycle hooks\r\n    // -----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * On init\r\n     */\r\n    ngOnInit(): void\r\n    {\r\n        // Setup available panels\r\n        this.panels = [\r\n            {\r\n                id         : 'perfils',\r\n                icon       : 'heroicons_outline:adjustments',\r\n                title      : 'Lista de perfils com permissões',\r\n                description: 'Detalhes de cada perfil com suas permissões'\r\n            },\r\n            {\r\n                id         : 'vinculacao',\r\n                icon       : 'heroicons_outline:user-group',\r\n                title      : 'Vínculação',\r\n                description: 'Víncular permissões a perfils!'\r\n            }\r\n        ];\r\n\r\n        // Subscribe to media changes\r\n        this._fuseMediaWatcherService.onMediaChange$\r\n            .pipe(takeUntil(this._unsubscribeAll))\r\n            .subscribe(({matchingAliases}) => {\r\n\r\n                // Set the drawerMode and drawerOpened\r\n                if ( matchingAliases.includes('lg') )\r\n                {\r\n                    this.drawerMode = 'side';\r\n                    this.drawerOpened = true;\r\n                }\r\n                else\r\n                {\r\n                    this.drawerMode = 'over';\r\n                    this.drawerOpened = false;\r\n                }\r\n\r\n                // Mark for check\r\n                this._changeDetectorRef.markForCheck();\r\n            });\r\n    }\r\n\r\n    /**\r\n     * On destroy\r\n     */\r\n    ngOnDestroy(): void\r\n    {\r\n        // Unsubscribe from all subscriptions\r\n        this._unsubscribeAll.next(null);\r\n        this._unsubscribeAll.complete();\r\n    }\r\n\r\n    // -----------------------------------------------------------------------------------------------------\r\n    // @ Public methods\r\n    // -----------------------------------------------------------------------------------------------------\r\n\r\n    /**\r\n     * Navigate to the panel\r\n     *\r\n     * @param panel\r\n     */\r\n    goToPanel(panel: string): void\r\n    {\r\n        this.selectedPanel = panel;\r\n\r\n        // Close the drawer on 'over' mode\r\n        if ( this.drawerMode === 'over' )\r\n        {\r\n            this.drawer.close();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Get the details of the panel\r\n     *\r\n     * @param id\r\n     */\r\n    getPanelInfo(id: string): any\r\n    {\r\n        return this.panels.find(panel => panel.id === id);\r\n    }\r\n\r\n    /**\r\n     * Track by function for ngFor loops\r\n     *\r\n     * @param index\r\n     * @param item\r\n     */\r\n    trackByFn(index: number, item: any): any\r\n    {\r\n        return item.id || index;\r\n    }\r\n}\r\n"],"x_google_ignoreList":[]}